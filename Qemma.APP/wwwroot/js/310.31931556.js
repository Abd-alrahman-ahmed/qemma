"use strict";(global["webpackChunkal_qemma"]=global["webpackChunkal_qemma"]||[]).push([[310],{5647:(t,e,s)=>{s.d(e,{Z:()=>d});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"table-responsive"},[s("table",{staticClass:"table mt-4"},[s("thead",[s("tr",[s("th",[t._v(t._s(t.$locales.t("lesson.name")))]),t.studentDetails?s("th",[t._v(t._s(t.$locales.t("lesson.start")))]):t._e(),s("th",[t._v(t._s(t.$locales.t("lesson.attend")))]),s("th",[t._v(t._s(t.$locales.t("lesson.quiz")))]),s("th",[t._v(t._s(t.$locales.t("lesson.homework")))]),s("th",[t._v(t._s(t.$locales.t("lesson.dictation")))]),s("th",[t._v(t._s(t.$locales.t("lesson.behaviour")))]),s("th",[t._v(t._s(t.$locales.t("lesson.interaction")))]),s("th",[t._v(t._s(t.$locales.t("lesson.paid")))]),s("th")])]),s("tbody",[0==t.lessonsCount?s("tr",[s("td",{attrs:{colspan:t.studentDetails?8:7}},[s("empty-state")],1)]):t._e(),t._l(t.studentLessons,(function(e,a){return s("tr",{key:"student-lesson-"+e.id},[s("td",[t._v(t._s(t.studentDetails?e.lesson.name:e.student.name))]),t.studentDetails?s("td",[t._v(t._s(t.$moment(e.date).local().locale(t.$locales.getCurrentLocaleCode()).format("MMMM Do dddd YYYY, h:mm:ss a")))]):t._e(),s("td",[t._v(t._s(t.$locales.t("lookups.attend."+(e.hasAttend?"1":"2"))))]),s("td",[t._v(t._s(e.quizDegree)+"/"+t._s(e.lesson.quizDegree))]),s("td",[t._v(t._s(e.homeworkDegree)+"/"+t._s(e.lesson.homeworkDegree))]),s("td",[t._v(t._s(e.inClassExamDegree)+"/"+t._s(e.lesson.inClassExamDegree))]),s("td",[t._v(t._s(e.behaviourDegree)+"/"+t._s(e.lesson.behaviourDegree))]),s("td",[t._v(t._s(e.interactionDegree)+"/"+t._s(e.lesson.interactionDegree))]),s("td",[t._v(t._s(e.paidAmount))]),s("td",[s("a",{attrs:{href:"Javascript:void(0);"},on:{click:function(s){return t.save(e,a)}}},[t._v(t._s(t.$locales.t("options.edit")))]),t._v(" | "),s("a",{attrs:{href:"Javascript:void(0);"},on:{click:function(s){return t.remove(e,a)}}},[t._v(t._s(t.$locales.t("options.delete")))])])])}))],2)])])},o=[];const l={name:"StudentLessonsTable",props:{studentLessons:{type:Array},studentDetails:{type:Boolean,default:!1}},computed:{lessonsCount(){return void 0==this.studentLessons?0:this.studentLessons.length}},methods:{save(t,e){this.$bus.$emit("init-save-student-lesson-modal",t,e,t.groupId,t.lesson,t.student)},remove(t,e){this.$bus.$emit("init-delete-modal",`studentlessons/${t.id}?studentId=${t.studentId}&lessonId=${t.lessonId}`,e)}}},n=l;var i=s(1001),r=(0,i.Z)(n,a,o,!1,null,null,null);const d=r.exports},7310:(t,e,s)=>{s.r(e),s.d(e,{default:()=>_});var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"students"},[s("h1",{staticClass:"mt-2 mb-5"},[t._v(t._s(t.$locales.t("student.details.title")))]),s("div",{staticClass:"card mb-2"},[s("div",{staticClass:"row d-flex align-items-center"},[t._m(0),s("div",{staticClass:"col-md-10"},[s("div",{staticClass:"row card-body"},[s("div",{staticClass:"col-4"},[s("h5",{staticClass:"card-title",attrs:{"data-toggle":"tooltip","data-placement":"bottom",title:t.$locales.t("student.name")}},[t._v(t._s(t.student.name))]),s("h6",{staticClass:"card-text",attrs:{"data-toggle":"tooltip","data-placement":"bottom",title:t.$locales.t("student.year")}},[t._v(t._s(t.$locales.t("lookups.year."+t.student.year)))]),s("p",{staticClass:"card-text",attrs:{"data-toggle":"tooltip","data-placement":"bottom",title:t.$locales.t("student.code")}},[t._v(t._s(t.student.id))])]),s("div",{staticClass:"col-4 card-delimiter"},[s("h3",{staticClass:"card-title",attrs:{"data-toggle":"tooltip","data-placement":"bottom",title:t.$locales.t("student.degree")}},[t._v(t._s(t.studentDegree))]),s("h3",{staticClass:"card-text",attrs:{"data-toggle":"tooltip","data-placement":"bottom",title:t.$locales.t("student.degree")}},[t._v(t._s(0==t.student.totalDegree?"--":t.student.degree/t.student.totalDegree*100+"%"))])]),s("div",{staticClass:"col-4"},[s("a",{attrs:{href:"Javascript:void(0);"},on:{click:t.saveStudent}},[s("font-awesome-icon",{attrs:{icon:"fas fa-pen","data-toggle":"tooltip","data-placement":"bottom",title:t.$locales.t("options.edit")}})],1)])])])])]),s("hr"),s("h5",{staticClass:"mt-5 mb-4"},[t._v(t._s(t.$locales.t("lessons.title"))+" "),s("button",{staticClass:"btn btn-primary btn-sm text-white m-2",on:{click:t.saveStudentLesson}},[s("font-awesome-icon",{attrs:{icon:"fas fa-circle-plus"}}),t._v(" "+t._s(t.$locales.t("options.add"))+" ")],1)]),s("app-filter",{attrs:{"init-filter":t.initLessonFilter,"filter-props":t.lessonFilterProps},on:{apply:t.applyLessonsFilter}}),s("student-lessons-table",{attrs:{studentLessons:t.lessons,"student-details":""}}),s("app-pagination",{attrs:{totalCount:t.lessonsCount},on:{changePage:t.getLessons}}),s("hr"),s("h5",{staticClass:"mt-5 mb-4"},[t._v(t._s(t.$locales.t("student.details.charts")))]),s("chart-filter",{attrs:{"grouping-options":t.chartGroupingOptions},on:{apply:t.applyChartFilter}}),t.chartHasData?s("apexchart",{attrs:{height:"400",type:"bar",options:t.chartOptions,series:t.series}}):s("empty-state")],1)},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-md-2 d-flex justify-content-center"},[a("div",{staticClass:"avatar"},[a("img",{staticClass:"avatar__letters img-size",attrs:{src:s(2315)}})])])}],l=s(5647),n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"alert alert-success p-0"},[s("div",{staticClass:"filter",attrs:{"data-toggle":"collapse","data-target":"#"+t.filterId,"aria-expanded":"false","aria-controls":"filter-body"}},[s("font-awesome-icon",{attrs:{icon:"fas fa-filter"}}),t._v(" "+t._s(t.$locales.t("filter.title"))+" ")],1),s("div",{staticClass:"collapse filter",attrs:{id:t.filterId}},[s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group col-lg-3 col"},[s("label",{staticClass:"control-label"},[t._v(t._s(t.$locales.t("filter.from")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.from,expression:"from"}],staticClass:"form-control bg-transparent",attrs:{dir:t.$locales.direction(),placeholder:t.$locales.t("filter.from"),onfocus:"this.select();",required:"",type:"date"},domProps:{value:t.from},on:{input:function(e){e.target.composing||(t.from=e.target.value)}}})]),s("div",{staticClass:"form-group col-lg-3 col "},[s("label",{staticClass:"control-label"},[t._v(t._s(t.$locales.t("filter.to")))]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.to,expression:"to"}],staticClass:"form-control bg-transparent",attrs:{dir:t.$locales.direction(),placeholder:t.$locales.t("filter.to"),onfocus:"this.select();",required:"",type:"date"},domProps:{value:t.to},on:{input:function(e){e.target.composing||(t.to=e.target.value)}}})]),s("div",{staticClass:"form-group col-lg-4 col"},[s("label",{staticClass:"control-label"},[t._v(t._s(t.$locales.t("filter.operator")))]),s("v-select",{attrs:{dir:t.$locales.direction(),clearable:!1,options:t.groupingOptions,reduce:function(t){return t.id},label:"name",placeholder:t.$locales.t("filter.operator"),required:""},scopedSlots:t._u([{key:"no-options",fn:function(){return[t._v(" "+t._s(t.$locales.t("emptystate.default"))+" ")]},proxy:!0}]),model:{value:t.operation,callback:function(e){t.operation=e},expression:"operation"}})],1)]),s("div",{staticClass:"text-right"},[s("button",{staticClass:"btn btn-primary btn-sm text-white",on:{click:t.apply}},[s("font-awesome-icon",{attrs:{icon:"fas fa-filter"}}),t._v(" "+t._s(t.$locales.t("filter.apply"))+" ")],1)])])])},i=[];const r={name:"ChartFilter",props:{groupingOptions:{type:Array}},data:()=>({from:"",to:"",operation:1}),computed:{filterId(){return"chart-filter-body"+Math.floor(781293464*Math.random())}},methods:{apply(){this.$emit("apply",this.from,this.to,this.operation)}}},d=r;var c=s(1001),u=(0,c.Z)(d,n,i,!1,null,"009801f1",null);const p=u.exports,h={name:"StudentDetails",components:{StudentLessonsTable:l.Z,ChartFilter:p},data:()=>({student:{},lessons:[],lessonsCount:0,series:[{name:"",data:[]}],categories:[]}),computed:{chartHasData(){return this.series&&this.series.length>0&&this.series[0].data&&this.series[0].data.length>0},chartOptions(){return{noData:{text:this.$locales.t("emptystate.default"),style:{fontSize:"32px",fontFamily:"'Droid Arabic Kufi', serif"}},chart:{id:"student-degrees",toolbar:{show:!1}},xaxis:{categories:this.categories}}},studentDegree(){var t="lookups.degree.",e=this.student.degree/this.student.degree*100;return t+=e>=85?"1":e>=75?"2":e>=60?"3":e>=50?"4":e<50?"5":"6",this.$locales.t(t)},lessonFilterProps(){return this.$locales.getLessonsFilterProps()},initLessonFilter(){return[{field:"studentId",operator:"eq",value:this.$route.params.id}]},chartGroupingOptions(){return this.$locales.chartGroupingOptions()}},created(){this.$bus.$on("student-modal-done",((t,e,s)=>{this.student=s})),this.$bus.$on("student-lesson-modal-done",((t,e,s)=>{t?Object.assign(this.lessons[e],s):this.lessons.push(s)})),this.$bus.$on("delete-done",(t=>{this.lessons.splice(t,1)}))},mounted(){this.getStudent(),this.getStudentChart(null,null,2)},methods:{getStudent(){this.$http.send({url:`${this.$BACKEND_APP_URL}/students/${this.$route.params.id}`}).then((t=>{this.student=t}))},getLessons(t=1,e=""){this.$http.send({url:`${this.$BACKEND_APP_URL}/studentlessons`,params:{pageNo:t,pageSize:this.pageSize,queryFilter:e}}).then((t=>{this.lessons=t.data??[],this.lessonsCount=t.count}))},applyLessonsFilter(t){this.getLessons(1,t)},saveStudent(){this.$bus.$emit("init-save-student-modal",this.student,0)},saveStudentLesson(){this.$bus.$emit("init-save-student-lesson-modal",null,0,this.student.groupIds[0],null,this.student)},getStudentChart(t,e,s){this.$http.send({url:`${this.$BACKEND_APP_URL}/students/${this.$route.params.id}/chart`,params:{from:t,to:e,chartOperator:s}}).then((t=>{this.series=[{name:t.name,data:t.data}],this.categories=t.categories}))},applyChartFilter(t,e,s){this.getStudentChart(t,e,s)}}},m=h;var v=(0,c.Z)(m,a,o,!1,null,"c236043a",null);const _=v.exports},2315:(t,e,s)=>{t.exports=s.p+"img/user.a5032ae4.png"}}]);
//# sourceMappingURL=310.31931556.js.map